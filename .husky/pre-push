# Run root type-check (uses package.json scripts)
echo "⏳ Running root type-check..."
pnpm run type-check || { echo "Type-check failed"; exit 1; }

# Run backend tests explicitly
echo "⏳ Running backend tests..."
if grep -q "\"test\"" apps/quiz-backend/package.json; then
  pnpm -C apps/quiz-backend run test || { echo "Backend tests failed"; exit 1; }
else
  echo "No backend test script found, skipping"
fi

# Run frontend unit tests explicitly (prefer non-interactive CI script)
echo "⏳ Running frontend unit tests..."
if grep -q "\"test:unit:ci\"" apps/quiz-app/package.json; then
  pnpm -C apps/quiz-app run test:unit:ci || { echo "Frontend unit tests failed"; exit 1; }
else
  echo "No frontend CI unit test script found, skipping"
fi

echo "✅ Pre-push checks passed"
